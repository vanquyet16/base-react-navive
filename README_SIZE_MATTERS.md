# H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng react-native-size-matters (ƒê√£ T·ªëi ∆Øu)

## Gi·ªõi thi·ªáu

`react-native-size-matters` l√† m·ªôt th∆∞ vi·ªán gi√∫p t·∫°o ra c√°c ·ª©ng d·ª•ng React Native responsive tr√™n nhi·ªÅu k√≠ch th∆∞·ªõc m√†n h√¨nh kh√°c nhau. Th∆∞ vi·ªán n√†y ƒë√£ ƒë∆∞·ª£c **t·ªëi ∆∞u h√≥a** v·ªõi c√°c t√≠nh nƒÉng m·ªõi nh∆∞ cache system, breakpoint system, device detection v√† nhi·ªÅu helper functions ti·ªán √≠ch.

## üöÄ C√°c t√≠nh nƒÉng m·ªõi ƒë√£ t·ªëi ∆∞u

### Performance Optimization

- **Cache System**: T·ª± ƒë·ªông cache c√°c gi√° tr·ªã ƒë√£ t√≠nh to√°n
- **Memoization**: Cache k√≠ch th∆∞·ªõc m√†n h√¨nh v√† pixel ratio
- **Lazy Loading**: Ch·ªâ t√≠nh to√°n khi c·∫ßn thi·∫øt

### Device Detection

- **isTablet()**: Detect thi·∫øt b·ªã tablet
- **getDeviceType()**: L·∫•y lo·∫°i thi·∫øt b·ªã (phone/tablet)
- **getPixelRatio()**: L·∫•y pixel ratio v·ªõi cache

### Breakpoint System

- **BREAKPOINTS**: ƒê·ªãnh nghƒ©a c√°c ƒëi·ªÉm break cho responsive design
- **getBreakpoint()**: L·∫•y breakpoint hi·ªán t·∫°i
- **getResponsiveValue()**: L·∫•y gi√° tr·ªã responsive theo breakpoint

## C√°c function ch√≠nh

### 1. `scale(size: number)`

- **M√¥ t·∫£**: Scale k√≠ch th∆∞·ªõc d·ª±a tr√™n chi·ªÅu r·ªông m√†n h√¨nh
- **S·ª≠ d·ª•ng cho**: Font size, padding, margin, width, height
- **V√≠ d·ª•**:

```typescript
import {scale} from '../utils/sizeMatters';

const styles = StyleSheet.create({
  text: {
    fontSize: scale(16), // S·∫Ω t·ª± ƒë·ªông scale theo m√†n h√¨nh
  },
  container: {
    padding: scale(20),
  },
});
```

### 2. `verticalScale(size: number)`

- **M√¥ t·∫£**: Scale k√≠ch th∆∞·ªõc d·ª±a tr√™n chi·ªÅu cao m√†n h√¨nh
- **S·ª≠ d·ª•ng cho**: Height, top, bottom, marginVertical
- **V√≠ d·ª•**:

```typescript
import {verticalScale} from '../utils/sizeMatters';

const styles = StyleSheet.create({
  container: {
    height: verticalScale(100),
    marginTop: verticalScale(20),
  },
});
```

### 3. `moderateScale(size: number, factor: number = 0.5)`

- **M√¥ t·∫£**: Scale v·ªõi factor c√≥ th·ªÉ ƒëi·ªÅu ch·ªânh (√≠t aggressive h∆°n scale)
- **S·ª≠ d·ª•ng cho**: Khi mu·ªën ki·ªÉm so√°t m·ª©c ƒë·ªô scale
- **V√≠ d·ª•**:

```typescript
import {moderateScale} from '../utils/sizeMatters';

const styles = StyleSheet.create({
  text: {
    fontSize: moderateScale(16, 0.3), // Scale √≠t h∆°n
  },
});
```

## üÜï C√°c function m·ªõi t·ªëi ∆∞u

### 4. `getOptimalFontSize(baseSize: number, minSize?: number, maxSize?: number)`

- **M√¥ t·∫£**: T·∫°o font size t·ªëi ∆∞u v·ªõi gi·ªõi h·∫°n min/max
- **S·ª≠ d·ª•ng cho**: Font size c·∫ßn gi·ªõi h·∫°n ƒë·ªÉ ƒë·∫£m b·∫£o readability
- **V√≠ d·ª•**:

```typescript
import {getOptimalFontSize} from '../utils/sizeMatters';

const styles = StyleSheet.create({
  title: {
    fontSize: getOptimalFontSize(18, 14, 22), // Min: 14px, Max: 22px
  },
  subtitle: {
    fontSize: getOptimalFontSize(16), // Kh√¥ng gi·ªõi h·∫°n
  },
});
```

### 5. `getAspectRatio(width: number, height: number)`

- **M√¥ t·∫£**: T√≠nh t·ª∑ l·ªá khung h√¨nh v√† scale
- **S·ª≠ d·ª•ng cho**: Images, videos, containers c·∫ßn gi·ªØ t·ª∑ l·ªá
- **V√≠ d·ª•**:

```typescript
import {getAspectRatio} from '../utils/sizeMatters';

const {width, height, aspectRatio} = getAspectRatio(16, 9);
const styles = StyleSheet.create({
  image: {
    width: width,
    height: height,
  },
});
```

### 6. `getResponsivePadding(horizontal: number, vertical: number)`

- **M√¥ t·∫£**: T·∫°o padding responsive cho c·∫£ horizontal v√† vertical
- **S·ª≠ d·ª•ng cho**: Containers c·∫ßn padding responsive
- **V√≠ d·ª•**:

```typescript
import {getResponsivePadding} from '../utils/sizeMatters';

const styles = StyleSheet.create({
  container: {
    ...getResponsivePadding(16, 12), // paddingHorizontal: scale(16), paddingVertical: verticalScale(12)
  },
});
```

### 7. `getResponsiveMargin(horizontal: number, vertical: number)`

- **M√¥ t·∫£**: T·∫°o margin responsive cho c·∫£ horizontal v√† vertical
- **S·ª≠ d·ª•ng cho**: Spacing gi·ªØa c√°c elements
- **V√≠ d·ª•**:

```typescript
import {getResponsiveMargin} from '../utils/sizeMatters';

const styles = StyleSheet.create({
  card: {
    ...getResponsiveMargin(20, 16), // marginHorizontal: scale(20), marginVertical: verticalScale(16)
  },
});
```

### 8. `getResponsiveSize(size: number, factor: number = 0.5)` (C√≥ cache)

- **M√¥ t·∫£**: T·∫°o k√≠ch th∆∞·ªõc responsive v·ªõi factor c√≥ th·ªÉ ƒëi·ªÅu ch·ªânh (c√≥ cache)
- **S·ª≠ d·ª•ng cho**: K√≠ch th∆∞·ªõc t√πy ch·ªânh v·ªõi performance t·ªëi ∆∞u
- **V√≠ d·ª•**:

```typescript
import {getResponsiveSize} from '../utils/sizeMatters';

const styles = StyleSheet.create({
  customText: {
    fontSize: getResponsiveSize(20, 0.3), // Scale √≠t h∆°n v·ªõi cache
  },
});
```

### 9. `getScaledWidth(percentage: number)` & `getScaledHeight(percentage: number)` (C√≥ cache)

- **M√¥ t·∫£**: L·∫•y k√≠ch th∆∞·ªõc theo ph·∫ßn trƒÉm m√†n h√¨nh (c√≥ cache)
- **S·ª≠ d·ª•ng cho**: Layout responsive theo ph·∫ßn trƒÉm
- **V√≠ d·ª•**:

```typescript
import {getScaledWidth, getScaledHeight} from '../utils/sizeMatters';

const styles = StyleSheet.create({
  modal: {
    width: getScaledWidth(80), // 80% chi·ªÅu r·ªông m√†n h√¨nh
    height: getScaledHeight(40), // 40% chi·ªÅu cao m√†n h√¨nh
  },
});
```

## üì± Device Detection & Breakpoint System

### Device Detection

```typescript
import {isTablet, getDeviceType, getPixelRatio} from '../utils/sizeMatters';

// Ki·ªÉm tra lo·∫°i thi·∫øt b·ªã
const deviceType = getDeviceType(); // 'phone' | 'tablet'
const isTabletDevice = isTablet(); // boolean
const pixelRatio = getPixelRatio(); // number v·ªõi cache

// S·ª≠ d·ª•ng trong component
const styles = StyleSheet.create({
  container: {
    padding: isTablet() ? scale(32) : scale(16),
  },
});
```

### Breakpoint System

```typescript
import {
  getBreakpoint,
  getResponsiveValue,
  BREAKPOINTS,
} from '../utils/sizeMatters';

// L·∫•y breakpoint hi·ªán t·∫°i
const currentBreakpoint = getBreakpoint(); // 'phone_small' | 'phone_medium' | 'phone_large' | 'tablet_small' | 'tablet_medium' | 'tablet_large'

// Responsive values theo breakpoint
const fontSize = getResponsiveValue({
  phone_small: 12,
  phone_medium: 14,
  phone_large: 16,
  tablet_small: 18,
  tablet_medium: 20,
  tablet_large: 22,
});

const padding = getResponsiveValue({
  phone_small: 8,
  phone_medium: 12,
  phone_large: 16,
  tablet_small: 20,
  tablet_medium: 24,
  tablet_large: 28,
});
```

### BREAKPOINTS Constants

```typescript
import {BREAKPOINTS} from '../utils/sizeMatters';

console.log(BREAKPOINTS);
// {
//   PHONE_SMALL: 320,   // iPhone SE, Galaxy S8
//   PHONE_MEDIUM: 375,  // iPhone 12, 13, 14
//   PHONE_LARGE: 414,   // iPhone 12 Pro Max, 13 Pro Max
//   TABLET_SMALL: 768,  // iPad Mini
//   TABLET_MEDIUM: 834, // iPad Air
//   TABLET_LARGE: 1024, // iPad Pro 11"
// }
```

## C√°ch s·ª≠ d·ª•ng trong d·ª± √°n

### 1. Import t·ª´ file utility

```typescript
import {
  scale,
  verticalScale,
  moderateScale,
  SIZES,
  // C√°c function m·ªõi
  getOptimalFontSize,
  getAspectRatio,
  getResponsivePadding,
  getResponsiveMargin,
  getResponsiveSize,
  getScaledWidth,
  getScaledHeight,
  // Device detection
  isTablet,
  getDeviceType,
  getPixelRatio,
  // Breakpoint system
  getBreakpoint,
  getResponsiveValue,
  BREAKPOINTS,
} from '../utils/sizeMatters';
```

### 2. S·ª≠ d·ª•ng constants c√≥ s·∫µn

```typescript
import {SIZES} from '../utils/sizeMatters';

const styles = StyleSheet.create({
  title: {
    fontSize: SIZES.FONT_TITLE,
    marginBottom: SIZES.SPACING_LARGE,
  },
  button: {
    borderRadius: SIZES.RADIUS_NORMAL,
    padding: SIZES.SPACING_MEDIUM,
  },
});
```

### 3. V√≠ d·ª• component ho√†n ch·ªânh v·ªõi c√°c t√≠nh nƒÉng m·ªõi

```typescript
import React from 'react';
import {View, Text, StyleSheet, TouchableOpacity} from 'react-native';
import {
  scale,
  verticalScale,
  SIZES,
  getOptimalFontSize,
  getResponsivePadding,
  getResponsiveMargin,
  isTablet,
  getResponsiveValue,
} from '../utils/sizeMatters';

const ExampleComponent: React.FC = () => {
  const isTabletDevice = isTablet();

  return (
    <View style={styles.container}>
      <Text style={styles.title}>Ti√™u ƒë·ªÅ Responsive</Text>
      <Text style={styles.subtitle}>Ph·ª• ƒë·ªÅ v·ªõi font size t·ªëi ∆∞u</Text>

      <View style={styles.buttonContainer}>
        <TouchableOpacity style={styles.button}>
          <Text style={styles.buttonText}>N√∫t b·∫•m</Text>
        </TouchableOpacity>
      </View>

      <View style={styles.infoContainer}>
        <Text style={styles.infoText}>
          Thi·∫øt b·ªã: {isTabletDevice ? 'Tablet' : 'Phone'}
        </Text>
      </View>
    </View>
  );
};

const styles = StyleSheet.create({
  container: {
    ...getResponsivePadding(20, 16),
    ...getResponsiveMargin(16, 12),
  },
  title: {
    fontSize: getOptimalFontSize(28, 20, 36), // Min: 20px, Max: 36px
    fontWeight: 'bold',
    marginBottom: SIZES.SPACING_MEDIUM,
    color: '#333',
  },
  subtitle: {
    fontSize: getResponsiveValue({
      phone_small: 12,
      phone_medium: 14,
      phone_large: 16,
      tablet_small: 18,
      tablet_medium: 20,
      tablet_large: 22,
    }),
    color: '#666',
    marginBottom: SIZES.SPACING_LARGE,
  },
  buttonContainer: {
    alignItems: 'center',
    marginBottom: SIZES.SPACING_LARGE,
  },
  button: {
    backgroundColor: '#007AFF',
    ...getResponsivePadding(24, 12),
    borderRadius: SIZES.RADIUS_NORMAL,
    alignItems: 'center',
    minWidth: isTablet() ? scale(200) : scale(150),
  },
  buttonText: {
    color: 'white',
    fontSize: SIZES.FONT_MEDIUM,
    fontWeight: '600',
  },
  infoContainer: {
    backgroundColor: '#f5f5f5',
    ...getResponsivePadding(16, 12),
    borderRadius: SIZES.RADIUS_NORMAL,
  },
  infoText: {
    fontSize: SIZES.FONT_SMALL,
    color: '#666',
    textAlign: 'center',
  },
});

export default ExampleComponent;
```

## üéØ Best Practices

### 1. Khi n√†o s·ª≠ d·ª•ng function n√†o?

- **`scale`**: Font size, padding, margin, width, height
- **`verticalScale`**: Height, top, bottom, marginVertical
- **`moderateScale`**: Khi mu·ªën ki·ªÉm so√°t m·ª©c ƒë·ªô scale
- **`getOptimalFontSize`**: Font size c·∫ßn gi·ªõi h·∫°n min/max
- **`getAspectRatio`**: Images, videos, containers c·∫ßn gi·ªØ t·ª∑ l·ªá
- **`getResponsivePadding/Margin`**: Spacing responsive
- **`getResponsiveSize`**: K√≠ch th∆∞·ªõc t√πy ch·ªânh v·ªõi cache
- **`getScaledWidth/Height`**: Layout theo ph·∫ßn trƒÉm m√†n h√¨nh

### 2. S·ª≠ d·ª•ng constants v√† cache system

- T·∫°o v√† s·ª≠ d·ª•ng constants cho c√°c k√≠ch th∆∞·ªõc ph·ªï bi·∫øn
- T·∫≠n d·ª•ng cache system ƒë·ªÉ t·ªëi ∆∞u performance
- S·ª≠ d·ª•ng `getResponsiveValue` cho responsive design

### 3. Device-specific design

```typescript
// Responsive design theo thi·∫øt b·ªã
const styles = StyleSheet.create({
  container: {
    padding: isTablet() ? scale(32) : scale(16),
    flexDirection: isTablet() ? 'row' : 'column',
  },
  text: {
    fontSize: getResponsiveValue({
      phone_small: 12,
      phone_medium: 14,
      phone_large: 16,
      tablet_small: 18,
      tablet_medium: 20,
      tablet_large: 22,
    }),
  },
});
```

### 4. Performance optimization

```typescript
// S·ª≠ d·ª•ng cache system
const cachedSize = getResponsiveSize(20, 0.5); // ƒê∆∞·ª£c cache
const cachedWidth = getScaledWidth(50); // ƒê∆∞·ª£c cache

// Clear cache khi c·∫ßn (v√≠ d·ª•: xoay m√†n h√¨nh)
import {clearSizeCache} from '../utils/sizeMatters';
// clearSizeCache(); // G·ªçi khi c·∫ßn t√≠nh to√°n l·∫°i
```

### 5. Test tr√™n nhi·ªÅu thi·∫øt b·ªã

- Lu√¥n test tr√™n c√°c k√≠ch th∆∞·ªõc m√†n h√¨nh kh√°c nhau
- S·ª≠ d·ª•ng iOS Simulator v√† Android Emulator v·ªõi c√°c k√≠ch th∆∞·ªõc kh√°c nhau
- Test tr√™n c·∫£ phone v√† tablet

## üìä V√≠ d·ª• th·ª±c t·∫ø n√¢ng cao

### Responsive Card Component

```typescript
import React from 'react';
import {View, Text, StyleSheet, TouchableOpacity} from 'react-native';
import {
  scale,
  SIZES,
  getOptimalFontSize,
  getResponsivePadding,
  getAspectRatio,
  isTablet,
  getResponsiveValue,
} from '../utils/sizeMatters';

interface CardProps {
  title: string;
  subtitle: string;
  imageRatio?: {width: number; height: number};
  onPress?: () => void;
}

const Card: React.FC<CardProps> = ({
  title,
  subtitle,
  imageRatio = {width: 16, height: 9},
  onPress,
}) => {
  const {width: imageWidth, height: imageHeight} = getAspectRatio(
    imageRatio.width,
    imageRatio.height,
  );

  return (
    <TouchableOpacity
      style={[styles.card, isTablet() && styles.cardTablet]}
      onPress={onPress}>
      <View style={[styles.image, {width: imageWidth, height: imageHeight}]}>
        <Text style={styles.imagePlaceholder}>Image</Text>
      </View>

      <View style={styles.content}>
        <Text style={styles.title}>{title}</Text>
        <Text style={styles.subtitle}>{subtitle}</Text>
      </View>
    </TouchableOpacity>
  );
};

const styles = StyleSheet.create({
  card: {
    backgroundColor: 'white',
    borderRadius: SIZES.RADIUS_NORMAL,
    shadowColor: '#000',
    shadowOffset: {width: 0, height: verticalScale(2)},
    shadowOpacity: 0.1,
    shadowRadius: SIZES.RADIUS_SMALL,
    elevation: 3,
    marginBottom: SIZES.SPACING_MEDIUM,
  },
  cardTablet: {
    flexDirection: 'row',
    alignItems: 'center',
  },
  image: {
    backgroundColor: '#f0f0f0',
    borderRadius: SIZES.RADIUS_SMALL,
    justifyContent: 'center',
    alignItems: 'center',
    marginBottom: SIZES.SPACING_SMALL,
  },
  imagePlaceholder: {
    fontSize: SIZES.FONT_SMALL,
    color: '#666',
  },
  content: {
    ...getResponsivePadding(16, 12),
    flex: 1,
  },
  title: {
    fontSize: getOptimalFontSize(18, 14, 24),
    fontWeight: '600',
    color: '#333',
    marginBottom: SIZES.SPACING_TINY,
  },
  subtitle: {
    fontSize: getResponsiveValue({
      phone_small: 12,
      phone_medium: 13,
      phone_large: 14,
      tablet_small: 15,
      tablet_medium: 16,
      tablet_large: 17,
    }),
    color: '#666',
    lineHeight: scale(20),
  },
});

export default Card;
```

### Responsive Grid Layout

```typescript
import React from 'react';
import {View, StyleSheet, FlatList} from 'react-native';
import {
  getScaledWidth,
  verticalScale,
  SIZES,
  isTablet,
  getResponsiveValue,
} from '../utils/sizeMatters';

interface GridItem {
  id: string;
  title: string;
}

interface ResponsiveGridProps {
  data: GridItem[];
  renderItem: (item: GridItem) => React.ReactElement;
}

const ResponsiveGrid: React.FC<ResponsiveGridProps> = ({data, renderItem}) => {
  const numColumns = getResponsiveValue({
    phone_small: 1,
    phone_medium: 2,
    phone_large: 2,
    tablet_small: 3,
    tablet_medium: 4,
    tablet_large: 5,
  });

  const itemWidth = getScaledWidth(100 / numColumns - 2); // Tr·ª´ margin

  return (
    <FlatList
      data={data}
      renderItem={({item}) => (
        <View style={[styles.gridItem, {width: itemWidth}]}>
          {renderItem(item)}
        </View>
      )}
      keyExtractor={item => item.id}
      numColumns={numColumns}
      columnWrapperStyle={styles.row}
      contentContainerStyle={styles.container}
      showsVerticalScrollIndicator={false}
    />
  );
};

const styles = StyleSheet.create({
  container: {
    padding: SIZES.SPACING_MEDIUM,
  },
  row: {
    justifyContent: 'space-between',
    marginBottom: SIZES.SPACING_MEDIUM,
  },
  gridItem: {
    marginBottom: SIZES.SPACING_SMALL,
  },
});

export default ResponsiveGrid;
```

## üîß Troubleshooting

### V·∫•n ƒë·ªÅ th∆∞·ªùng g·∫∑p:

1. **Text qu√° nh·ªè/l·ªõn**: S·ª≠ d·ª•ng `getOptimalFontSize` v·ªõi gi·ªõi h·∫°n min/max
2. **Layout b·ªã v·ª°**: Ki·ªÉm tra l·∫°i vi·ªác s·ª≠ d·ª•ng ƒë√∫ng function scale
3. **Performance ch·∫≠m**: T·∫≠n d·ª•ng cache system, tr√°nh scale qu√° nhi·ªÅu element c√πng l√∫c
4. **Responsive kh√¥ng ƒë√∫ng**: S·ª≠ d·ª•ng breakpoint system v·ªõi `getResponsiveValue`

### Debug:

```typescript
import {
  Dimensions,
  getScreenDimensions,
  getPixelRatio,
  getDeviceType,
  getBreakpoint,
} from '../utils/sizeMatters';

console.log('Screen dimensions:', getScreenDimensions());
console.log('Pixel ratio:', getPixelRatio());
console.log('Device type:', getDeviceType());
console.log('Current breakpoint:', getBreakpoint());
console.log('Scaled size:', scale(16));
```

### Clear cache khi c·∫ßn:

```typescript
import {clearSizeCache} from '../utils/sizeMatters';

// G·ªçi khi xoay m√†n h√¨nh ho·∫∑c thay ƒë·ªïi orientation
const handleOrientationChange = () => {
  clearSizeCache();
  // Re-render component
};
```

## üìà Performance Tips

1. **S·ª≠ d·ª•ng cache system**: C√°c function `getResponsiveSize`, `getScaledWidth`, `getScaledHeight` ƒë√£ c√≥ cache
2. **T·ªëi ∆∞u re-render**: S·ª≠ d·ª•ng `useMemo` cho c√°c gi√° tr·ªã scale ph·ª©c t·∫°p
3. **Lazy loading**: Ch·ªâ t√≠nh to√°n khi c·∫ßn thi·∫øt
4. **Batch updates**: Tr√°nh g·ªçi nhi·ªÅu function scale trong m·ªôt l·∫ßn render

```typescript
import React, {useMemo} from 'react';
import {getResponsiveValue, isTablet} from '../utils/sizeMatters';

const MyComponent = () => {
  const responsiveStyles = useMemo(
    () => ({
      fontSize: getResponsiveValue({
        phone_small: 12,
        phone_medium: 14,
        tablet_small: 16,
      }),
      padding: isTablet() ? scale(32) : scale(16),
    }),
    [],
  );

  return <Text style={responsiveStyles}>Content</Text>;
};
```

V·ªõi c√°c t√≠nh nƒÉng m·ªõi n√†y, `react-native-size-matters` gi·ªù ƒë√¢y cung c·∫•p m·ªôt gi·∫£i ph√°p responsive design ho√†n ch·ªânh, t·ªëi ∆∞u v√† d·ªÖ s·ª≠ d·ª•ng cho React Native!
